<div class="container mt-4">
  <div class="card-container">
    <div *ngFor="let post of posts" class="card">
      <div class="user">
        <img [src]="post.user?.image || 'assets/default-user-image.png'" alt="User Image" class="user-image">
        <span>{{ post.user?.name || 'Anonymous' }}</span>
      </div>
      <div class="content" (click)="goToPostDetails(post._id)">
        <p>{{ post.content }}</p>
      </div>
      <div class="image-carousel">
        <div class="image-slide" *ngFor="let image of post.images">
          <img [src]="image" alt="Post Image" class="post-image">
        </div>
      </div>
      <div class="card-body d-flex justify-content-between align-items-center">
        <div class="likes" (click)="toggleLike(post)" [ngStyle]="{'color': post.liked ? 'rgb(8, 102, 255)' : 'black'}">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
            <path d="M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311h-.3v428h472.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25.1-5.6-37.1zM112 528v364c0 17.7 14.3 32 32 32h65V496h-65c-17.7 0-32 14.3-32 32z"></path>
          </svg>
          <span>{{ post.likes }}</span>
        </div>
        <div class="comments">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
            <path d="M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"></path>
          </svg>
          <span (click)="toggleComments(post)">
            {{ post.showComments ? 'Hide Comments' : 'Show Comments' }}
          </span>
        </div>
      </div>
      <div class="comments-section" *ngIf="post.showComments">
        <div class="comments-list">
          <div *ngFor="let comment of post.comments" class="comment">
            <div class="user">
              <img [src]="comment.user?.image || 'default-user-image.png'" alt="User Image" class="user-image">
              <span>{{ comment.user?.name || 'Anonymous' }}</span>
            </div>
            <p>{{ comment.comment }}</p>
          </div>
        </div>
        <form class="comment-form" (ngSubmit)="addComment(post)">
          <div class="form-group d-flex align-items-center">
            <input type="text" class="form-control mr-2" placeholder="Add a comment..." [(ngModel)]="newComment">
            <button type="submit" class="btn btn-primary">Post</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div> 